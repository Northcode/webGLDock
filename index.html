<html>

    <head>
	<meta charset="utf-8">
	<style>
	    body { margin: 0; }
	    canvas { width: 100%; height: 100%; }
	</style>
    </head>
    
    <body>
	<script src="three.js"></script>
	<script src="threex.keyboardstate.js"></script>
	<script src="OrbitControls.js"></script>
	<script>
	 let scene = new THREE.Scene();
	 let camera = new THREE.PerspectiveCamera( 75, window.innerWidth/window.innerHeight, 0.1, 1000 );

	 const deg_to_rad = (deg) => deg * (Math.PI / 180);

	 let renderer = new THREE.WebGLRenderer();
	 renderer.setSize( window.innerWidth, window.innerHeight );
	 document.body.appendChild( renderer.domElement );

	 renderer.shadowMap.enabled = true;
	 renderer.shadowMap.type = THREE.PCFShadowMap;

	 let cube = new THREE.Mesh( new THREE.BoxGeometry( 1, 1, 1 ), new THREE.MeshStandardMaterial( { color: 0x00ff00 } ) );
	 scene.add( cube );
	 cube.recieveShadow = true;
	 cube.castshadow = true;

	 /* let myfloor = new THREE.Mesh(new THREE.BoxGeometry ( 100, 100, 1 ), new THREE.MeshStandardMaterial( { color: 0x5DCC69 } ));*/
	 let myfloor = new THREE.Mesh(new THREE.PlaneGeometry ( 1000, 1000 ), new THREE.MeshStandardMaterial( { color: 0x0000ff } ));
	 myfloor.rotation.set(deg_to_rad(270),0,0);
	 myfloor.position.set(0,-5,0);
	 myfloor.recieveShadow = true;
	 myfloor.castShadow = false;
	 scene.add(myfloor);

	 let light = new THREE.DirectionalLight(0xffffff, 1, 100);
	 light.position.set(0,500,0);
	 light.shadow.mapSize.width = 512;
	 light.shadow.mapSize.height = 512;
	 light.shadow.camera.near = 0.5;
	 light.shadow.camera.far = 500;
	 light.castShadow = true;
	 scene.add(light);

	 let skybox = new THREE.Mesh( new THREE.CubeGeometry( 1000, 1000, 1000 ), new THREE.MeshStandardMaterial( { color: 0x3D8DCC, side: THREE.BackSide } ));
	 scene.add(skybox);
	 
	 camera.position.z = 5;
	 camera.position.y = 0.5;

	 camera.lookAt(cube.position);

	 let helper = new THREE.CameraHelper( light.shadow.camera );

	 let controls = new THREE.OrbitControls( camera, renderer.domElement );

	 const animate = () => {
	     requestAnimationFrame( animate );

	     cube.rotation.x += 0.01;
	     cube.rotation.y += 0.01;

	     

	     renderer.render(scene, camera);
	 };

	 animate();
	</script>
    </body>
    
</html>
